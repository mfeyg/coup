<title>coup::name</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="name.css">

<dialog open>
<form id="name-form" action="lobby.html" onsubmit="localStorage.setItem('name', document.getElementById('name').value)">
  <label>Enter your name: <input required autocomplete="off" id="name" autofocus></label>
</form>
</dialog>

<script>
let redirect = new URLSearchParams(location.search).get("redirect")
if (redirect != null) {
  redirect = new URL(location.origin + redirect)
  const form = document.getElementById("name-form")
  form.action = redirect.pathname
  redirect.searchParams.forEach((value, name) => {
    const hidden = document.createElement("input")
    hidden.type = "hidden"
    hidden.name = name
    hidden.value = value
    form.appendChild(hidden)
  })
}
</script>